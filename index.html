<!DOCTYPE html>
<html lang="hu">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Pixel Vásárlás - Mentéssel és Zoommal</title>
<style>
:root {
--beige: #efdbc4;
--light-green: #e2e5d8;
--mid-green: #adb795;
--brown: #c69870;
--white: #ffffff;
}

body {
background-color: var(--beige);
margin: 0;
font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
display: flex;
flex-direction: column;
align-items: center;
padding: 20px;
}

h1, p {
text-align: center;
color: #333;
margin: 10px;
}

#controls {
margin: 10px 0;
text-align: center;
}

#pixel-grid {
display: grid;
grid-template-columns: repeat(100, 15px);
grid-template-rows: repeat(100, 15px);
gap: 1px;
background-color: var(--light-green);
padding: 10px;
border-radius: 10px;
box-shadow: 0 4px 10px rgba(0,0,0,0.1);
overflow: auto;
max-width: 100%;
transform-origin: top left;
transition: transform 0.3s;
}

.pixel {
width: 15px;
height: 15px;
background-color: var(--white);
border: 1px solid var(--light-green);
cursor: pointer;
transition: background-color 0.2s;
}

.pixel:hover {
background-color: var(--mid-green);
}

.pixel.selected {
background-color: var(--brown);
border: 1px solid var(--mid-green);
}

#buy-form {
background: var(--white);
padding: 20px;
width: 90%;
max-width: 400px;
border-radius: 10px;
box-shadow: 0 4px 10px rgba(0,0,0,0.1);
margin-top: 20px;
text-align: center;
}

#buy-form input {
width: 100%;
padding: 10px;
margin: 10px 0;
border: 1px solid var(--light-green);
border-radius: 5px;
background-color: var(--light-green);
}

#buy-form button {
width: 100%;
padding: 12px;
background-color: var(--brown);
color: var(--white);
border: none;
border-radius: 5px;
font-size: 16px;
font-weight: bold;
cursor: pointer;
transition: background-color 0.3s;
}

#buy-form button:hover {
background-color: #a26e49;
}

#loading {
position: fixed;
width: 100%;
height: 100%;
background: var(--beige);
display: flex;
justify-content: center;
align-items: center;
z-index: 9999;
font-size: 24px;
color: #666;
}
</style>
</head>
<body>
<div id="loading">Betöltés...</div>

<h1>Vásárolj egy 10x10 pixeles blokkot!</h1>
<p>Kattints egy szabad blokkra, vagy nézd meg a foglalásokat!</p>

<div id="controls">
<button onclick="zoomIn()">Nagyítás</button>
<button onclick="zoomOut()">Kicsinyítés</button>
<button onclick="resetZoom()">Alaphelyzet</button>
</div>

<div id="pixel-grid"></div>

<form id="buy-form">
<h2>Vásárlás (DEMO)</h2>
<input type="url" id="link" placeholder="Link (pl. weboldalad)" required>
<input type="url" id="image" placeholder="Kép URL (pl. logó)" required>
<button type="submit">Vásárlás (DEMO)</button>
</form>

<script>
let zoomLevel = 1;

function zoomIn() {
zoomLevel += 0.2;
document.getElementById('pixel-grid').style.transform = `scale(${zoomLevel})`;
}

function zoomOut() {
zoomLevel -= 0.2;
if (zoomLevel < 0.4) zoomLevel = 0.4;
document.getElementById('pixel-grid').style.transform = `scale(${zoomLevel})`;
}

function resetZoom() {
zoomLevel = 1;
document.getElementById('pixel-grid').style.transform = 'scale(1)';
}

window.addEventListener('load', () => {
document.getElementById('loading').style.display = 'none';
});

document.addEventListener('DOMContentLoaded', () => {
const grid = document.getElementById('pixel-grid');
const total = 100 * 100;
const savedPixels = JSON.parse(localStorage.getItem('pixels') || '{}');
let selected = null;

for (let i = 0; i < total; i++) {
const div = document.createElement('div');
div.classList.add('pixel');
div.dataset.index = i;

if (savedPixels[i]) {
div.style.backgroundImage = `url(${savedPixels[i].image})`;
div.style.backgroundSize = "cover";
div.title = savedPixels[i].link;
div.style.cursor = "pointer";
div.onclick = () => window.open(savedPixels[i].link, "_blank");
} else {
div.addEventListener('click', () => {
if (selected) selected.classList.remove('selected');
div.classList.add('selected');
selected = div;
document.getElementById('buy-form').scrollIntoView({ behavior: 'smooth' });
});
}

grid.appendChild(div);
}

const form = document.getElementById('buy-form');
form.addEventListener('submit', e => {
e.preventDefault();
if (!selected) {
alert('Először válassz ki egy blokkot!');
return;
}

const link = document.getElementById('link').value;
const image = document.getElementById('image').value;
const index = selected.dataset.index;

savedPixels[index] = { link, image };
localStorage.setItem('pixels', JSON.stringify(savedPixels));

selected.style.backgroundImage = `url(${image})`;
selected.style.backgroundSize = "cover";
selected.title = link;
selected.classList.remove('selected');
selected.onclick = () => window.open(link, "_blank");
selected = null;

form.reset();
alert('Blokk lefoglalva!');
});
});
</script>
</body>
</html>
